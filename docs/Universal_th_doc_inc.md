The concept of "Universal" portfolio was introduced by
[Thomas M. Cover](https://web.mit.edu/6.454/www/www_fall_2001/shaas/universal_portfolios.pdf)
in 1996. It has its roots in the Information Theory
([see](https://www.amazon.com/Elements-Information-Theory-Telecommunications-Processing/dp/0471241954)).

Let $S_n = \Pi_{k=1}^n b_k^T \cdot x_k$ be the portfolio wealth after $n$
reinvestments. Here $b_k$ is the set of portfolio weights in the $k$-th
reinvestment period (*i.e.*, $b_k^T \cdot b_k = 1$ and $b_{k;i} \geq 0$,
where $i$ stands for $i$-th component of the portfolio), and $x_k$ are
the ratios between the asset price at the end and at the beginning of the
reinvestment period (*i.e.*, $x_k = P_{k+1} / P_{k-1}$). And let ${\hat S}_n$
be the wealth of the BCW (Best Constant Weights) portfolio
(*i.e.*, computed after the last settlement, end of reinvestment period $n$).
Then $S_n$ is called
"Universal portfolio" if

\begin{equation*}
  \lim_{n \rightarrow \infty} \frac{1}{n} \ln \frac{{\hat S}_n}{S_n} = 0.
\end{equation*}

The Cover's 1996 portfolio weights are defined by the following
nonanticipating sequence of weights,

\begin{equation*}
  b_{k+1} = \frac{\int_{{\cal B}_n} b S_k(b) db}
  {\int_{{\cal B}_n} S_k(b) db},
\end{equation*}

where,
${\cal B}_n$ is the n-simplex $b^T \cdot b = 1$ and $b_{i} \geq 0$.
The initial values, $b_1$, are set to $1/n$ (equal weighted).
Cover's 1996 portfolio is a Universal portfolio.

*azapy* implements a Monte Carlo estimator for the integrals in the
expression of the weights. The
underlining random generators for $b$ vectors on the n-simplex
${\cal B}_b$ are based on the Dirichlet (for arbitrary $\alpha$-parameters)
as well as a on the Uniform,
equivalent to a Flat Dirichlet (all $\alpha$ set to $1$),
distributions. The user is allowed to choose between various underling
random vector generators.
Optional, the implementation, provides the antithetic variance reduction
generated by the use of all the permutations of $b$ components, after a set is
generated. Note that in this case the total number of Monte Carlo simulations
will increase by a factor equal to the factorial of the number of portfolio
components (*e.g.*, if the portfolio components is 7, then the effective
number of MC simulations is multiplied by 5040).
This feature should be used with care,
only for portfolios with a relatively small number of components.

There are 2 support classes:

* [**UniversalEngine**](azapy.Engines.UniversalEngine.UniversalEngine):
computes the portfolio weights and performs in-sample analysis,
* [**Port_Universal**](azapy.PortOpt.Port_Universal.Port_Universal) :
performs portfolio backtesting, out-of-sample analysis.

Note, the UniversalEngine class cannot be imbedded into the ModelPipeline
mechanism.
