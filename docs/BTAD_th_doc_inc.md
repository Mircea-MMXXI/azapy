Omega ratio was introduced in 2002 as an alternative to Sharpe ratio.
It can be defined as

\begin{equation*}
  \Omega_{\alpha} =
  \frac{\int_{\alpha}^{+\infty} [1 - F(r)] dr}{\int_{-\infty}^{\alpha} F(r) dr} - 1 =
  \frac{E[r] - \alpha}{E[(\alpha - r)^+]},
\end{equation*}

where $\alpha$ is the Omega threshold and $F(\cdot)$ is the rate of return cdf.
It is common to associate
$\alpha$ with the risk-free rate accessible to the investor.
The above expression suggests that $\Omega_{\alpha}$ ratio is the Sharpe
ratio for *Below Threshold Absolute Deviation*  measure (BTAD),

\begin{equation*}
  {\rm BTAD}_{\alpha} = E[(\alpha - r)^+].
\end{equation*}

It can be evaluated either in terms of
standard or detrended rate of returns (where $r$ is replaced with
${\bar r} = r - E[r]$).

Although studied before, the BTAD risk measure were resurrected after the
introduction of Omega ratio-based portfolio selection.

**azapy** implements a generalization of BTAD measure,
namely the *mixture BTAD* (mBTAD).

The mixture is defined as a superposition of BTAD measures
for different thresholds, *i.e*,

\begin{equation*}
  {\rm mBTAD} = \sum_{l=1}^L {\cal K}_l \times {\rm BTAD}_{\alpha_l},
\end{equation*}

where:

* $L$ is the size of the mixture,
* $\{{\cal K}_l\}_{l=1,\cdots,L}$ is a set of positive coefficients normalized to unit,
* $\{\alpha_l\}_{l=1,\cdots,L}$ is a set of distinct thresholds.

> Note: a possible choice could be $L=3$ and $\alpha=[-0.01, 0, 0.01]$

The single BTAD is a special case on mBTAD for $L=1$.

> Note: mBTAD dispersion measure for $L=1$, $\alpha_1=0$ and detrended
rate of returns is the same as mMAD first level dispersion measure.

> Note: mBTAD measures (except for $L=1$ and $\alpha_1=0$ with
detrended rate of returns) are not proper dispersion measures. They violate the
positive homogeneity axiom and in the case of using standard rate of return
they also violate the location invariance axiom.
However, the mathematical formalism of risk-based
optimal portfolio constructions can be applied.

We call the BTAD-Sharpe ratio Omega ratio, which is a well-established
terminology among practitioners.

> Note: The BTAD-Sharpe ratio, for $L=1$, $\alpha_1=\mu_0$
(the risk-free rate) and standard rate of returns,
is the initial Omega ratio, $\Omega_{\mu_0}$, introduced by Keating and Shadwick in 2002.

The following portfolio optimization strategies are available:

* Minimization of risk for targeted expected rate of return value,
* Minimum risk portfolio,
* Maximization of expected rate of return for a risk vale generated by a
benchmark portfolio (*e.g.* same risk as equal weighted portfolio),
* Maximization of expected rate of return for fixed risk-aversion factor,
* Maximization of Omega ratio,
* Minimization of the inverse of Omega ratio,
* Maximization of diversification factor for targeted expected rate of return
value <span style="color:blue">(beta version)</span>,
* Maximum diversified portfolio <span style="color:blue">(beta version)</span>,
* Maximization of expected rate of return for a diversification factor value
generated by a benchmark portfolio (e.g., same diversification factor as
equal weighted portfolio) <span style="color:blue">(beta version)</span>,
* Maximization of diversification factor for an expected rate of return
generated by a benchmark portfolio (e.g., same diversification factor as
equal weighted portfolio) <span style="color:blue">(beta version)</span>.


__The rigorous mathematical description of these strategies is presented
[here](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4205165).__

There are 2 support classes:

* [**BTADAnalyzer**](azapy.Analyzers.BTADAnalyzer.BTADAnalyzer):
computes the portfolio weights and performs in-sample analysis,
* [**Port_BTAD**](azapy.PortOpt.Port_BTAD.Port_BTAD) :
performs portfolio backtesting, out-of-sample analysis.
