
# mBTSD optimal portfolios <a name="TOP"></a>

BTSD stands for Below Target Semi-Deviation. It is similar
to BTAD but defined in
terms of $L_2$ norm rather than $L_1$, *i.e.*,

\begin{equation*}
  {\rm BTSD}_{\alpha} = \left\| \left( \alpha - r \right)^+ \right\|_2
\end{equation*}

where:

* $\|\cdot\| = ( E[|\cdot|^2])^{1/2}$ is the $L_2$ norm,
* $\alpha$ is the BTSD threshold (it may be interpreted as a risk-free rate),

The BTSD measure can be computed in terms of either standard  or
detrended rate of returns (*i.e.* ${\bar r} = r - E[r]$).

The BTSD-Sharpe ratio it is also called Sortino ratio, *i.e.*,
\begin{equation}
  {\cal S}_{\mu_0} = \frac{E[r] - \mu_0}{{\rm BTAD}_{\mu_0}}.
\end{equation}

Sortino optimal portfolio strategy is popular among practitioners.

>Note: Sortino ratio was first introduced in 1994 by Sortino and Price as
as alternative to the Sharpe ratio.

**azapy** implements a generalization of BTSD measure,
namely the *mixture BTSD* (mBTSD).

The mixture is defined as a superposition of regular BTSD measures
for different thresholds, *i.e*,

\begin{equation*}
  \rho = \sum_{l=1}^L {\cal K}_l \times {\rm BTSD}_{\alpha_l},
\end{equation*}

where:

* $L$ is the size of the mixture,
* $\{{\cal K}_l\}_{l=1,\cdots,L}$ is a set of positive coefficients normalized to unit,
* $\{\alpha_l\}_{l=1,\cdots,L}$ is a set of distinct BTSD thresholds.

> Note: a possible choice could be $L=3$ and $\alpha=[0.01, 0.0, -0.01]$

The single BTSD measure is a special case of mBTSD for $L=1$.

> Note: The mBTSD measures (except for $L=1$, $\alpha_1=0$ and detrended rate
of return) are not proper dispersion measure. They violate the
positive homogeneity axiom and in the case of using standard rate of return
they also violate the location invariance axiom.
However, the mathematical formalism of risk-based
optimal portfolio constructions can be applied.

> Note: mBTSD measure for $L=1$, $\alpha_1=0$ and detrended
rate of returns is the same as mLSD first leve dispersion measure.

We will call the mBTSD-Sharpe ratio as Sortino ratio, which is a well established
terminology among practitioners.

>Note: Our definition of Sortino ratio is a generalization.
It coincide with the original
1994 definition for special case where $L=1$, $\alpha_1=\mu_0$ (the risk-free
rate) and standard rate of return.


The following portfolio optimization strategies are available:
* Minimization of dispersion for targeted expected rate of return,
* Maximization of Sharpe ratio,
* Minimization of the inverse of Sharpe ratio,
* Minimum dispersion portfolio,
* Maximization of expected rate of return for a risk vale generated by a
benchmark portfolio (*e.g.* same risk as equal weighted portfolio),
* Maximization of expected rate of returns for fixed risk-aversion factor.

There are 2 support classes:

* **BTSDAnalyzer** : computes the portfolio weights and performs in-sample
analysis,
* **Port_BTSD** : performs portfolio back testing, out-of-sample analysis.
